(function(R,n,e,v,y,l,T){"use strict";const{ScrollView:C,Text:P,TextInput:B,Platform:k}=e.ReactNative,{OS:m}=k,L=n.findByProps("ButtonColors","ButtonLooks","ButtonSizes").default,E=n.findByProps("openLazy","hideActionSheet"),u=n.findByProps("push","pushLazy","pop"),M=n.findByProps("getRenderCloseButton"),{default:x,getRenderCloseButton:z}=M,A=n.findByName("Icon"),{FormRow:N}=T.Forms,d=[],f=[],p=e.stylesheet.createThemedStyleSheet({codeBlock:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,fontSize:12,backgroundColor:y.semanticColors.BACKGROUND_SECONDARY,color:y.semanticColors.TEXT_NORMAL,marginTop:10,borderRadius:3,padding:10},infoText:{fontSize:16,fontWeight:"bold",color:"#333",textAlign:"center",marginTop:20}});f.push(l.before("openLazy",E,function(s){const[i,g,c]=s;g==="MessageLongPressActionSheet"&&i.then(function(h){const D=l.after("default",h,function(V,_){e.React.useEffect(function(){return function(){D()}},[]);let[w,S]=_.props?.children?.props?.children?.props?.children,t=w?.props?.message??c?.message;if(!S||!t)return;t.content;let o;const F=function(){return e.React.createElement(x,{initialRouteName:"MessagePage",goBackOnBackPress:!0,screens:{MessagePage:{title:"EditMessage",headerLeft:z(function(){return u.pop()}),render:function(){const[I,U]=e.React.useState(t.content);return e.React.createElement(C,{style:{flex:1,marginHorizontal:13,marginVertical:10}},e.React.createElement(L,{text:"Save",color:"brand",size:"small",onPress:function(){({...t});let a=d.find(function(r){return r.id==t.id});if(a)a.novocontent=o,t.content=o;else{let r={};r.novocontent=o,r.id=t.id,d.push(r),t.content=o}u.pop()}}),m=="ios"?e.React.createElement(B,{style:p.codeBlock,onChangeText:function(a){return o=a},defaultValue:t.content,multiline:!0}):e.React.createElement(B,{style:p.codeBlock,onChangeText:function(a){return o=a},defaultValue:t.content,multiline:!0}),e.React.createElement(P,{style:p.infoText},"Go to another conversation and come back to it for editing to take effect"))}}}})};S.push(e.React.createElement(N,{label:"Edit Message local",leading:e.React.createElement(A,{source:v.getAssetIDByName("ic_message_edit")}),onPress:function(){E.hideActionSheet(),u.push(F)}}))})})}));const O=n.findByName("RowManager");f.push(l.after("generate",O.prototype,function(s,i){let[g]=s;if(g.rowType!==1)return;let c=d.find(function(h){return h.id==i.message.id});c&&(i.message.content=c.novocontent)}));const b=function(){return f.forEach(function(s){return s()})};return R.onUnload=b,R})({},vendetta.metro,vendetta.metro.common,vendetta.ui.assets,vendetta.ui,vendetta.patcher,vendetta.ui.components);
