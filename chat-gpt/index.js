(function(a){"use strict";var l={onLoad:function(){const{metro:c,commands:p,logger:r}=vendetta,{sendBotMessage:s}=c.findByProps("sendBotMessage"),u=c.findByProps("sendMessage","receiveMessage");async function g(t){const e={method:"POST",headers:{Authorization:"Bearer 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","Content-Type":"application/json"},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"user",content:t}],max_tokens:2048})},n=await(await fetch("https://api.openai.com/v1/chat/completions",e)).json();return y(n)}function y(t){let e=t;try{e=t.choices[0].message.content}catch{}return e.replaceAll(/^[ \t]*\r?\n/gm,"")}this.onUnload=p.registerCommand({name:"gpt3.5",displayName:"gpt3.5",description:"chat with gpt-3.5",displayDescription:"chat with gpt-3.5",options:[{name:"message",description:"message to send to gpt",type:3,required:!0,displayName:"message",displayDescription:"message to send to gpt"},{name:"clyde",displayName:"clyde",description:"use clyde to send the reply",displayDescription:"use clyde to send the reply",required:!0,type:5}],applicationId:-1,inputType:1,type:1,execute:async function(t,e){try{let n=t.find(function(o){return o.name=="message"}).value,d=t.find(function(o){return o.name=="clyde"}),i=await g(n);r.log(i),!d||!d.value?await u.sendMessage(e.channel.id,{content:i}):await s(e.channel.id,i),await s(e.channel.id,"pronto")}catch(n){r.log(n),s(e.channel.id,"error look at the debug!")}}})}};return a.default=l,Object.defineProperty(a,"__esModule",{value:!0}),a})({});
