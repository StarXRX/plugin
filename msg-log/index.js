(function(s,o,d,a,i){"use strict";const c=o.FluxDispatcher._actionHandlers._orderedActionHandlers,l=a.findByProps("sendMessage","receiveMessage"),g=a.findByProps("createBotMessage"),f=a.findByProps("BOT_AVATARS"),r=[];function h(e,n){let t={id:"",type:0,content:"",channel_id:n.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof e=="string"?t.content=e:t={...t,...e},t}const p=function(){try{return r.push(d.before("actionHandler",c.MESSAGE_UPDATE?.find(function(e){return e.name==="MessageStore"}),function(e){try{let n=a.findByProps("getMessage","getMessages").getMessage(e[0]?.message?.channel_id,e[0]?.message.id)?.content,t=e[0]?.message?.content;if(!t||!n)return;e[0].message.content=n+" `[editada]`\n"+t}catch{}})),r.push(d.before("actionHandler",c.MESSAGE_DELETE?.find(function(e){return e.name==="MessageStore"}),function(e){try{let n=a.findByProps("getMessage","getMessages").getMessage(e[0].channelId,e[0].id);if(!n||n.author.id=="000")return;let t=g.createBotMessage({channelId:e[0].channelId,content:n.content});t.author={username:n.author.username+" ANTI DELETE",avatar:"clyde",id:"000"},f.BOT_AVATARS[n.author.username+" ANTI DELETE"]="https://cdn.discordapp.com/avatars/"+n.author.id+"/"+n.author.avatar+".png",l.receiveMessage(e[0].channelId,t)}catch{}})),null}catch{}},u=function(){i.logger.log("ativando o plugin anti delete e anti edit"),o.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:h("PLACEHOLDER",{id:"0"})}),o.FluxDispatcher.dispatch({type:"MESSAGE_DELETE",channelId:"0",id:"0"}),setTimeout(function(){return p()},300)};var E={onLoad:u,onUnload:function(){i.logger.log(`Unloading ${pluginName}...`);for(let e of r)e();i.logger.log(`${pluginName} unloaded.`)}};return s.default=E,s.onLoad=u,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta);
