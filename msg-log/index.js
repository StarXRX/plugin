(function(r,i,o,s){"use strict";const c=i.FluxDispatcher._actionHandlers._orderedActionHandlers,g=s.findByProps("sendMessage","receiveMessage"),u=s.findByProps("createBotMessage"),a=[];findByName("RowManager"),a.push(o.before("actionHandler",c.MESSAGE_UPDATE?.find(function(e){return e.name==="MessageStore"}),function(e){try{let n=s.findByProps("getMessage","getMessages").getMessage(e[0].message.channel_id,e[0].message.id)?.content,t=e[0]?.message?.content;if(!t||!n)return;e[0].message.content=n+" `[edited]`\n"+t}catch{}})),a.push(o.before("actionHandler",c.MESSAGE_DELETE?.find(function(e){return e.name==="MessageStore"}),function(e){try{let n=s.findByProps("getMessage","getMessages").getMessage(e[0].message.channel_id,e[0].message.id)?.content,t=e[0]?.message?.content;if(!t||!n)return;let d=u.createBotMessage({channelId:e[0].message.channel_id,content:n+`[deleted]
`+t});d.author={username:"/vibrate",avatar:"clyde"},g.receiveMessage(e[0].message.channel_id,d)}catch{}}));const f=function(){return a.forEach(function(e){return e()})};return r.onUnload=f,r})({},vendetta.metro.common,vendetta.patcher,vendetta.metro);
