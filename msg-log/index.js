(function(a,i,d,s,o){"use strict";const c=i.FluxDispatcher._actionHandlers._orderedActionHandlers,u=s.findByProps("sendMessage","receiveMessage"),g=s.findByProps("createBotMessage"),r=[];function f(e,t){let n={id:"",type:0,content:"",channel_id:t.id,author:{id:"",username:"",avatar:"",discriminator:"",publicFlags:0,avatarDecoration:null},attachments:[],embeds:[],mentions:[],mention_roles:[],pinned:!1,mention_everyone:!1,tts:!1,timestamp:"",edited_timestamp:null,flags:0,components:[]};return typeof e=="string"?n.content=e:n={...n,...e},n}const h=function(){try{return r.push(d.before("actionHandler",c.MESSAGE_UPDATE?.find(function(e){return e.name==="MessageStore"}),function(e){try{let t=s.findByProps("getMessage","getMessages").getMessage(e[0]?.message?.channel_id,e[0]?.message.id)?.content,n=e[0]?.message?.content;if(!n||!t)return;e[0].message.content=t+" `[editada]`\n"+n}catch{}})),r.push(d.before("actionHandler",c.MESSAGE_DELETE?.find(function(e){return e.name==="MessageStore"}),function(e){try{let t=s.findByProps("getMessage","getMessages").getMessage(e[0].channelId,e[0].id);if(!t||t.author.id=="000")return;let n=g.createBotMessage({channelId:e[0].channelId,content:t.content});n.author={username:t.author.username+" ANTI DELETE",avatar:"clyde",id:"000"},u.receiveMessage(e[0].channelId,n)}catch{}})),null}catch{}},l=function(){o.logger.log("ativando o plugin anti delete e anti edit"),i.FluxDispatcher.dispatch({type:"MESSAGE_UPDATE",message:f("PLACEHOLDER",{id:"0"})}),i.FluxDispatcher.dispatch({type:"MESSAGE_DELETE",channelId:"0",id:"0"}),setTimeout(function(){return h()},300)};var E={onLoad:l,onUnload:function(){o.logger.log("Unloading ...");for(let e of r)e();o.logger.log(" unloaded.")}};return a.default=E,a.onLoad=l,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta);
